{% extends "accounts/dashboard.html" %}

{% block dashboard_content %}
<h2 class="text-lg font-semibold mb-4">Order #{{ order.order_number }}</h2>

<div class="space-y-4">
  <!-- Order Info -->
  <div class="bg-gray-50 p-4 rounded shadow-sm">
    <p><strong>Order Date:</strong> {{ order.created_at|date:"M d, Y" }}</p>
    <p><strong>Status:</strong> {{ order.status }}</p>
    <p><strong>Total:</strong> ₹{{ order.order_total }}</p>
  </div>

  <!-- Ordered Items -->
  <div>
    <h3 class="font-semibold mb-2">Items</h3>
    <table class="w-full border-collapse text-sm">
      <thead>
        <tr class="bg-gray-100">
          <th class="p-3 text-left">Product</th>
          <th class="p-3">Quantity</th>
          <th class="p-3">Unit Price</th>
          <th class="p-3">Line Total</th>
        </tr>
      </thead>
      <tbody>
        {% for item in ordered_products %}
        <tr class="border-t hover:bg-gray-50">
          <td class="p-3">{{ item.product.product_name }}</td>
          <td class="p-3">{{ item.quantity }}</td>
          <td class="p-3">₹{{ item.product_unit_price }}</td>
          <td class="p-3 font-semibold">₹{{ item.product_line_price }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Summary -->
  <div class="text-right mt-4">
    <p class="text-gray-700"><strong>Subtotal:</strong> ₹{{ order.order_total|floatformat:2 }}</p>
    <p class="text-lg font-bold"><strong>Grand Total:</strong> ₹{{ order.order_total|add:order.tax }}</p>
  </div>
</div>
{% endblock %}
