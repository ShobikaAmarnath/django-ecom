{% if messages %}
<div id="messages-container" class="fixed top-20 right-6 z-50 space-y-3 transition duration-300">

  {% for message in messages %}
  <div
    class="relative flex items-start gap-3 px-4 py-3 rounded-lg shadow-elevated text-sm font-medium pr-10 animate-fade-in-up
    {% if message.tags == 'success' %}
      bg-success/10 text-success border border-success
    {% elif message.tags == 'error' or message.tags == 'danger' %}
      bg-danger/10 text-danger border border-danger
    {% elif message.tags == 'warning' %}
      bg-warning/10 text-warning border border-warning
    {% else %}
      bg-info/10 text-info border border-info
    {% endif %}">
    
    <!-- Icon -->
    <span class="mt-0.5">
      {% if message.tags == 'success' %}
        <i class="fa fa-check-circle"></i>
      {% elif message.tags == 'error' or message.tags == 'danger' %}
        <i class="fa fa-times-circle"></i>
      {% elif message.tags == 'warning' %}
        <i class="fa fa-exclamation-triangle"></i>
      {% else %}
        <i class="fa fa-info-circle"></i>
      {% endif %}
    </span>

    <!-- Message Text -->
    <span>{{ message }}</span>

    <!-- Close button -->
    <button type="button"
      class="absolute top-2 right-2 text-lg leading-none text-text-muted hover:text-text-main focus:outline-none"
      onclick="this.parentElement.remove()">
      &times;
    </button>
  </div>
  {% endfor %}
</div>

<script>
  // Auto-dismiss alerts after 5 seconds with fade-out
  document.addEventListener("DOMContentLoaded", () => {
    const alerts = document.querySelectorAll("#messages-container > div");
    alerts.forEach(alert => {
      setTimeout(() => {
        alert.classList.add("opacity-0", "translate-y-2");
        setTimeout(() => alert.remove(), 300); // remove after fade-out
      }, 5000);
    });
  });
</script>
{% endif %}
