<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        .container { width: 100%; max-width: 600px; margin: 0 auto; background-color: #ffffff; padding: 20px; }
        .header { background-color: #007bff; color: white; padding: 10px; text-align: center; }
        .content { padding: 20px; }
        .footer { text-align: center; padding: 10px; font-size: 12px; color: #777; }
        .order-details, .shipping-info { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .order-details th, .order-details td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .order-details th { background-color: #f2f2f2; }
        .totals { float: right; width: 50%; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Thank You For Your Order!</h1>
        </div>
        <div class="content">
            <p>Hi {{ user.first_name }},</p>
            <p>We've received your order and will get started on it right away. Your order number is <strong>{{ order.order_number }}</strong>.</p>
            
            <h3 style="border-bottom: 1px solid #ddd; padding-bottom: 5px;">Order Summary</h3>
            <table class="order-details">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Quantity</th>
                        <th style="text-align: right;">Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.orderproduct_set.all %}
                    <tr>
                        <td>
                            {{ item.product.product_name }}
                            {% for variation in item.variations.all %}
                                <br><small>{{ variation.category.name|capfirst }}: {{ variation.value|capfirst }}</small>
                            {% endfor %}
                        </td>
                        <td style="text-align: center;">{{ item.quantity }}</td>
                        <td style="text-align: right;">₹{{ item.product_line_price|floatformat:2 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <table style="width: 100%;">
                <tr>
                    <td style="width: 50%; vertical-align: top;">
                        <h3 style="border-bottom: 1px solid #ddd; padding-bottom: 5px;">Shipping Address</h3>
                        <address style="font-style: normal;">
                            {{ order.full_name }}<br>
                            {{ order.address_line_1 }}<br>
                            {% if order.address_line_2 %}{{ order.address_line_2 }}<br>{% endif %}
                            {{ order.city }}, {{ order.state }}<br>
                            {{ order.country }}<br>
                            Phone: {{ order.phone }}
                        </address>
                    </td>
                    <td style="width: 50%; vertical-align: top;">
                        <h3 style="border-bottom: 1px solid #ddd; padding-bottom: 5px;">Totals</h3>
                        <table class="totals">
                            <tr><td>Subtotal:</td><td style="text-align: right;">₹{{ subtotal|floatformat:2 }}</td></tr>
                            <tr><td>Shipping:</td><td style="text-align: right;">₹{{ order.shipping_charge|floatformat:2 }}</td></tr>
                            <tr style="font-weight: bold;"><td>Grand Total:</td><td style="text-align: right;">₹{{ order.order_total|floatformat:2 }}</td></tr>
                        </table>
                    </td>
                </tr>
            </table>

        </div>
        <div class="footer">
            <p>&copy; {% now "Y" %} SMK-ECOM. All rights reserved.</p>
        </div>
    </div>
</body>
</html>